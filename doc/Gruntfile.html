<!DOCTYPE html><html lang="en"><head><title>Gruntfile</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="Gruntfile"><meta name="groc-project-path" content="Gruntfile.js"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">Gruntfile.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="gruntfilejs">Gruntfile.js</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

module.exports = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(grunt)</span> {</span>
<span class="hljs-pi">	'use strict'</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="project-configuration">Project configuration.</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper">	grunt.initConfig({</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Project metadata</li>
</ul></div></div><div class="code"><div class="wrapper">		pkg:		grunt.file.readJSON( <span class="hljs-string">'package.json'</span> ),
		settings:	grunt.file.readYAML( <span class="hljs-string">'settings.yml'</span> ),
		site:		grunt.file.readYAML( <span class="hljs-string">'site.yml'</span> ),</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Before generating any new files, remove files from previous build.</li>
</ul></div></div><div class="code"><div class="wrapper">		clean: {
			site:	[ <span class="hljs-string">'&lt;%= settings.dest %&gt;/*.html'</span> ],
			doc:	[ <span class="hljs-string">'&lt;%= settings.doc %&gt;/*'</span> ]
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Lint JavaScript</li>
</ul></div></div><div class="code"><div class="wrapper">		jshint: {
			all: [
				<span class="hljs-string">'Gruntfile.js'</span>, 
				<span class="hljs-string">'&lt;%= settings.scripts %&gt;/**/*.js'</span>, 
				<span class="hljs-string">'&lt;%= settings.components %&gt;/**/*.js'</span>,
				<span class="hljs-string">'!&lt;%= settings.scripts %&gt;/vendor/*.js'</span>, <span class="hljs-comment">// exclude vendor scripts</span>
				<span class="hljs-string">'!&lt;%= settings.scripts %&gt;/all.min.js'</span>
			],
			options: {
				jshintrc: <span class="hljs-string">'.jshintrc'</span>
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Compile SASS</li>
</ul></div></div><div class="code"><div class="wrapper">		sass: {
			options: {
				sourcemap: <span class="hljs-literal">true</span>
			},
			site: {
				files: {
					<span class="hljs-string">'&lt;%= settings.assets %&gt;/css/main.css'</span>: <span class="hljs-string">'&lt;%= settings.style %&gt;/main.scss'</span>
				}
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Generate SASS import file with all atoms, molecules, organisms and templates</li>
</ul></div></div><div class="code"><div class="wrapper">		sassimp: {
			site:{
				files: [<span class="hljs-string">'&lt;%= settings.atoms %&gt;/**/*.scss'</span>,<span class="hljs-string">'&lt;%= settings.molecules %&gt;/**/*.scss'</span>,<span class="hljs-string">'&lt;%= settings.organisms %&gt;/**/*.scss'</span>, <span class="hljs-string">'&lt;%= settings.templates %&gt;/**/*.scss'</span>],
				dest: <span class="hljs-string">'&lt;%= settings.style %&gt;/_components.scss'</span>
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Build HTML from templates and data</li>
</ul></div></div><div class="code"><div class="wrapper">		assemble: {
			options: {
				flatten: <span class="hljs-literal">true</span>,
				production: <span class="hljs-literal">false</span>,
				assets: <span class="hljs-string">'&lt;%= settings.assets %&gt;'</span>,
				postprocess: <span class="hljs-built_in">require</span>(<span class="hljs-string">'pretty'</span>),</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Metadata</p>
</blockquote></div></div><div class="code"><div class="wrapper">				pkg: <span class="hljs-string">'&lt;%= pkg %&gt;'</span>,
				site: <span class="hljs-string">'&lt;%= site %&gt;'</span>,
				data: [<span class="hljs-string">'&lt;%= settings.data %&gt;'</span>],</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Templates</p>
</blockquote></div></div><div class="code"><div class="wrapper">				partials: <span class="hljs-string">'&lt;%= settings.partials %&gt;/*.hbs'</span>,
				layoutdir: <span class="hljs-string">'&lt;%= settings.layouts %&gt;'</span>,
				layout: <span class="hljs-string">'&lt;%= settings.layout %&gt;'</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Extensions</p>
</blockquote></div></div><div class="code"><div class="wrapper">				helpers: <span class="hljs-string">'&lt;%= settings.helpers %&gt;'</span>
			},
			site: {
				files: {<span class="hljs-string">'&lt;%= settings.dest %&gt;/'</span>: [<span class="hljs-string">'&lt;%= settings.templates %&gt;/**/*.hbs'</span>]}
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Watch files</li>
</ul></div></div><div class="code"><div class="wrapper">		watch: {
			sass: {
				files: [<span class="hljs-string">'&lt;%= settings.style %&gt;/**/*.scss'</span>, <span class="hljs-string">'&lt;%= settings.components %&gt;/**/*.scss'</span>],
				tasks: [<span class="hljs-string">'styles'</span>]
			},
			js: {
				files: [<span class="hljs-string">'Gruntfile.js'</span>, <span class="hljs-string">'&lt;%= settings.scripts %&gt;/**/*.js'</span>, <span class="hljs-string">'&lt;%= settings.components %&gt;/**/*.js'</span>, <span class="hljs-string">'!&lt;%= settings.scripts %&gt;/all.min.js'</span>],
				tasks: [<span class="hljs-string">'scripts'</span>]
			},
			hbs: {
				files: [<span class="hljs-string">'&lt;%= settings.templates %&gt;/**/*.hbs'</span>, <span class="hljs-string">'&lt;%= settings.components %&gt;/**/*.hbs'</span>],
				tasks: [<span class="hljs-string">'build'</span>]
			},
			docs: {
				files: [
					<span class="hljs-string">"README.md"</span>,
					<span class="hljs-string">"TODO.md"</span>,
					<span class="hljs-string">"Gruntfile.js"</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Scripts</p>
</blockquote></div></div><div class="code"><div class="wrapper">					<span class="hljs-string">"&lt;%= settings.scripts %&gt;/**/*.js"</span>, 
					<span class="hljs-string">"&lt;%= settings.atoms %&gt;/**/*.js"</span>, 
					<span class="hljs-string">"&lt;%= settings.molecules %&gt;/**/*.js"</span>, 
					<span class="hljs-string">"&lt;%= settings.organisms %&gt;/**/*.js"</span>, 
					<span class="hljs-string">"&lt;%= settings.templates %&gt;/**/*.js"</span>, </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>SASS</p>
</blockquote></div></div><div class="code"><div class="wrapper">					<span class="hljs-string">"&lt;%= settings.style %&gt;/**/*.scss"</span>, 
					<span class="hljs-string">"&lt;%= settings.atoms %&gt;/**/*.scss"</span>, 
					<span class="hljs-string">"&lt;%= settings.molecules %&gt;/**/*.scss"</span>, 
					<span class="hljs-string">"&lt;%= settings.organisms %&gt;/**/*.scss"</span>, 
					<span class="hljs-string">"&lt;%= settings.templates %&gt;/**/*.scss"</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Templates</p>
</blockquote></div></div><div class="code"><div class="wrapper">					<span class="hljs-string">"&lt;%= settings.atoms %&gt;/**/*.hbs"</span>, 
					<span class="hljs-string">"&lt;%= settings.molecules %&gt;/**/*.hbs"</span>, 
					<span class="hljs-string">"&lt;%= settings.organisms %&gt;/**/*.hbs"</span>, 
					<span class="hljs-string">"&lt;%= settings.templates %&gt;/**/*.hbs"</span>,
					<span class="hljs-string">"&lt;%= settings.layouts %&gt;/**/*.hbs"</span>,
					<span class="hljs-string">"&lt;%= settings.partials %&gt;/**/*.hbs"</span>
				],
				tasks: [<span class="hljs-string">'docs'</span>]
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Run multiple watch commands</li>
</ul></div></div><div class="code"><div class="wrapper">		concurrent: {
			options: {
				logConcurrentOutput: <span class="hljs-literal">true</span>
			},
			site: {
				tasks: [<span class="hljs-string">'watch:sass'</span>, <span class="hljs-string">'watch:js'</span>, <span class="hljs-string">'watch:hbs'</span>]
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Compile scripts with Require JS</li>
</ul></div></div><div class="code"><div class="wrapper">		requirejs: {
			compile: {
				options: {
					baseUrl: <span class="hljs-string">"&lt;%= settings.scripts %&gt;"</span>,
					mainConfigFile: <span class="hljs-string">"&lt;%= settings.scripts %&gt;/config.js"</span>,
					name: <span class="hljs-string">"main"</span>,
					out: <span class="hljs-string">"&lt;%= settings.scripts %&gt;/all.min.js"</span>
				}
			}
		},</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Generate documentation</li>
</ul></div></div><div class="code"><div class="wrapper">		groc: {
			site: [
				<span class="hljs-string">"README.md"</span>,
				<span class="hljs-string">"TODO.md"</span>,
				<span class="hljs-string">"Gruntfile.js"</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Scripts</p>
</blockquote></div></div><div class="code"><div class="wrapper">				<span class="hljs-string">"&lt;%= settings.scripts %&gt;/**/*.js"</span>, 
				<span class="hljs-string">"&lt;%= settings.atoms %&gt;/**/*.js"</span>, 
				<span class="hljs-string">"&lt;%= settings.molecules %&gt;/**/*.js"</span>, 
				<span class="hljs-string">"&lt;%= settings.organisms %&gt;/**/*.js"</span>, 
				<span class="hljs-string">"&lt;%= settings.templates %&gt;/**/*.js"</span>, </div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>SASS</p>
</blockquote></div></div><div class="code"><div class="wrapper">				<span class="hljs-string">"&lt;%= settings.style %&gt;/**/*.scss"</span>, 
				<span class="hljs-string">"&lt;%= settings.atoms %&gt;/**/*.scss"</span>, 
				<span class="hljs-string">"&lt;%= settings.molecules %&gt;/**/*.scss"</span>, 
				<span class="hljs-string">"&lt;%= settings.organisms %&gt;/**/*.scss"</span>, 
				<span class="hljs-string">"&lt;%= settings.templates %&gt;/**/*.scss"</span>,</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><blockquote>
<p>Templates</p>
</blockquote></div></div><div class="code"><div class="wrapper">				<span class="hljs-string">"&lt;%= settings.atoms %&gt;/**/*.hbs"</span>, 
				<span class="hljs-string">"&lt;%= settings.molecules %&gt;/**/*.hbs"</span>, 
				<span class="hljs-string">"&lt;%= settings.organisms %&gt;/**/*.hbs"</span>, 
				<span class="hljs-string">"&lt;%= settings.templates %&gt;/**/*.hbs"</span>,
				<span class="hljs-string">"&lt;%= settings.layouts %&gt;/**/*.hbs"</span>,
				<span class="hljs-string">"&lt;%= settings.partials %&gt;/**/*.hbs"</span>
			],
			options: {
				<span class="hljs-string">"out"</span>: <span class="hljs-string">"&lt;%= settings.doc %&gt;/"</span>
			}
		}

	});</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="load-npm-plugins-to-provide-necessary-tasks">Load npm plugins to provide necessary tasks.</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">	grunt.loadNpmTasks(<span class="hljs-string">'grunt-contrib-clean'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'grunt-contrib-jshint'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'grunt-contrib-watch'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'grunt-contrib-sass'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'grunt-contrib-requirejs'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'grunt-concurrent'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'grunt-groc'</span>);
	grunt.loadNpmTasks(<span class="hljs-string">'assemble'</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="custom-task-to-generate-import-statements-of-all-components">Custom task to generate import statements of all components</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'sassimp'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(target)</span>{</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Get the options</li>
</ul></div></div><div class="code"><div class="wrapper">		<span class="hljs-keyword">var</span> options = grunt.config.get(<span class="hljs-keyword">this</span>.name)[target];
		<span class="hljs-keyword">var</span> files = [];</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Get all files matching the glob from options</li>
</ul></div></div><div class="code"><div class="wrapper">		grunt.file.expand(options.files).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(filepath)</span> {</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Get basename</li>
</ul></div></div><div class="code"><div class="wrapper">			<span class="hljs-keyword">var</span> ofile = path.basename(filepath),
				file = ofile.replace(<span class="hljs-string">".scss"</span>,<span class="hljs-string">""</span>).substr(<span class="hljs-number">1</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Push SASS import statement into array</li>
</ul></div></div><div class="code"><div class="wrapper">			files.push(<span class="hljs-string">'@import "'</span> + <span class="hljs-string">"../../"</span> + filepath.replace(ofile,file) + <span class="hljs-string">'";'</span>);
		});</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Write results to destination file</li>
</ul></div></div><div class="code"><div class="wrapper">		grunt.file.write(options.dest, files.join(<span class="hljs-string">"\n"</span>));
	});</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="tasks">Tasks</h3>
<ul>
<li>Build HTML</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'build'</span>, [<span class="hljs-string">'clean:site'</span>, <span class="hljs-string">'assemble:site'</span>]);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Check for errors in javascript</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'scripts'</span>, [<span class="hljs-string">'jshint'</span>, <span class="hljs-string">'requirejs'</span>]);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Generate components import and compile SASS</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'styles'</span>, [<span class="hljs-string">'sassimp:site'</span>, <span class="hljs-string">'sass:site'</span>]);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Generate documentation</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'docs'</span>, [<span class="hljs-string">'clean:doc'</span>, <span class="hljs-string">'groc:site'</span>]);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Watch for changes and generate documentation</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'autodocs'</span>, [<span class="hljs-string">'watch:docs'</span>]);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Watch for changes and automatically run tasks</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'automate'</span>, [<span class="hljs-string">'concurrent:site'</span>]);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>Default task</li>
</ul></div></div><div class="code"><div class="wrapper">	grunt.registerTask(<span class="hljs-string">'default'</span>, [<span class="hljs-string">'build'</span>, <span class="hljs-string">'scripts'</span>, <span class="hljs-string">'styles'</span>, <span class="hljs-string">'docs'</span>, <span class="hljs-string">'automate'</span>]);

};</div></div></div></div></body></html>